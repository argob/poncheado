<!DOCTYPE html>
<!--[if IEMobile 7 ]> <html lang="es"class="iem7"> <![endif]-->
<!--[if lt IE 7 ]> <html lang="es" class="ie6 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7 ]>    <html lang="es" class="ie7 lt-ie8"> <![endif]-->
<!--[if IE 8 ]>    <html lang="es" class="ie8"> <![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html lang="es"><!--<![endif]-->
    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Banco de Pruebas</title>
  <meta name="description" content="Base de html y css para la creación de sitios pertenecientes a la Administración Pública Nacional de la República Argentina.">
  <meta name="author" content="Presidencia de la Nación">
  <link rel="shortcut icon" href="/favicon.ico">

  <!-- Nav and address bar color -->
  <meta name="theme-color" content="#0072b8">
  <meta name="msapplication-navbutton-color" content="#0072b8">
  <meta name="apple-mobile-web-app-status-bar-style" content="#0072b8">

  <meta property="og:url" content="http://localhost:4000/proyectos/argentina/estatico/agenda-hospital-posadas/" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Banco de Pruebas" />
  <meta property="og:description" content="Base de html y css para la creación de sitios pertenecientes a la Administración Pública Nacional de la República Argentina." />
  <meta property="og:image" content="/ejemplos/img/jumbotron.jpg" />
  <meta property="og:locale" content="es_AR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Banco de Pruebas" />
  <meta name="twitter:description" content="Base de html y css para la creación de sitios pertenecientes a la Administración Pública Nacional de la República Argentina." />
  <meta name="twitter:image" content="/ejemplos/img/jumbotron.jpg" />

  <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet">
  <link href="/vendor/poncho/dist/css/droid-serif.css" rel="stylesheet">
  <link href="/node_modules/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
  <link href="/node_modules/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <!--<link href="/node_modules/chosen-js/chosen.css" rel="stylesheet">-->
  <link href="/node_modules/flag-icon-css/css/flag-icon.css" rel="stylesheet"> 
  <!-- <link href="/vendor/poncho/dist/css/poncho.css" rel="stylesheet">
  <link href="/vendor/iconos/dist/css/icono-arg.css" rel="stylesheet"> -->
  <link href="http://argob.github.io/poncho/node_modules/argob-poncho/dist/css/poncho.min.css" rel="stylesheet">
  <link href="http://argob.github.io/poncho/node_modules/argob-poncho/dist/css/icono-arg.css" rel="stylesheet">
  <link href="/css/argentina.css" rel="stylesheet">
  <link href="/css/docs.css" rel="stylesheet">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="/node_modules/html5shiv/html5shiv.js"></script>
      <script src="/node_modules/respond.js/respond.min.js"></script>
  <![endif]-->  
    
</head>

    <script src="/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <!--<script src="/node_modules/chosen-js/chosen.jquery.js"></script>-->

  <body>

    
<header>


  <nav class="navbar navbar-top navbar-default" role="navigation">
    <div class="container">
      <div>

        <div class="navbar-header">
          <a class="navbar-brand" href="/proyectos/argentina/" aria-label="Argentina.gob.ar Presidencia de la Nación">
            <img alt="Argentina.gob.ar" src="/proyectos/argentina/img/argentinagob.svg" height="50">
          </a>
          <a class="btn btn-success btn-login visible-xs" href="/proyectos/mi-argentina/v3/"><span class="fa fa-user fa-fw"></span></a>
          <a class="btn btn-primary btn-login visible-xs" href="#" onclick="$('.navbar.navbar-top').addClass('state-search');"><span class="fa fa-search fa-fw"></span></a>
        </div>

        <!--<ul class="nav navbar-nav navbar-right hidden-xs">
          <a href="#" onclick="$('.navbar.navbar-top').removeClass('state-search');" class="btn btn-link visible-xs"> <i class="fa fa-times"></i> </a>
          <li>
            <div class="input-group">
              
              <input id="buscar" type="text" class="form-control" aria-label="Buscar trámites, servicios o áreas" placeholder="Buscar trámites, servicios o áreas ...">
              <span class="input-group-btn">
                <button class="btn btn-primary" id="buscar-btn" type="button" aria-label="Buscar"><i class="fa fa-search"></i></button>
              </span>
            </div>
          </li>              
          <a href="#" class="dropdown-toggle btn btn-success hidden-xs" aria-label="Ingresar a Mi Argentina" data-toggle="dropdown"><i class="fa fa-user"></i> &nbsp; Mi Argentina</a>
        </ul>-->
        <ul class="nav navbar-nav navbar-right hidden-xs"> <a
            onclick="jQuery('.navbar.navbar-top').removeClass('state-search');" href="#"
            class="btn btn-link visible-xs"> <i class="fa fa-times"></i> </a>
          <div id="cd-login"> <a id="cd-login" href="https://mi.argentina.gob.ar" class="btn btn-link hidden-xs"
              aria-label="Ingresar a Mi Argentina"> <i class="icono-arg-mi-argentina"></i>Mi Argentina</a></div>
        </ul>
      </div>
    </div>
  </nav>

</header>


<script type="text/javascript">

  var busqueda = document.getElementById('buscar');
  var buscar = document.getElementById('buscar-btn');
  buscar.onclick = function () {
    var buscado = busqueda.value;
    location.href = "http://www.argentina.gob.ar/buscar/" + buscado;
  };
  
  //PONCHO LABS
  var url_string = window.location.href;
  var url = new URL(url_string);
  var lab = url.searchParams.get("lab");
  
  
  if(lab == ""){
    $("head").append('<link href="/proyectos/argentina/pruebas/poncho_lab.css" rel="stylesheet">');
  }
</script>

    <main role="main">
      <style type="text/css">
	.section-eventos.state-loading:after {
		display: none;
	}
</style>
<section class="jumbotron"
	style="background-image: url(https://www.argentina.gob.ar/sites/default/files/styles/jumbotron/public/_dsc7420.jpg?itok=Ei8BsnvI);">
	<div class="jumbotron_bar">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<ol class="breadcrumb">
						<li><a href="/">Inicio</a></li>
						<li class="active">Agenda - Hospital Posadas</li>
					</ol>
				</div>
			</div>
		</div>
	</div>
	<div class="jumbotron_body">
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-8 col-md-offset-2 text-center">
					<h1>Agenda</h1>
					<p></p>
				</div>
			</div>
		</div>
	</div>
	<div class="overlay"></div>
</section>

<div class="container">


	<section class="section-eventos state-loading">
		<div id="eventos" style="display: none;">
			<div class="row">
				<div class="col-md-3">
					<div class="form-group">
						<label>Mes</label>
						<select class="form-control" id="selectorMes" name="">
							<option value="00">Todos los meses</option>
							<option value="01">Enero</option>
							<option value="02">Febrero</option>
							<option value="03">Marzo</option>
							<option value="04">Abril</option>
							<option value="05">Mayo</option>
							<option value="06">Junio</option>
							<option value="07">Julio</option>
							<option value="08">Agosto</option>
							<option value="09">Septiembre</option>
							<option value="10">Octubre</option>
							<option value="11">Noviembre</option>
							<option value="12">Diciembre</option>
						</select>
					</div>
				</div>
				<div class="col-md-9">
					<div class="form-group"><label>Buscá eventos</label> <input class="form-control" id="text_titulo"
							placeholder="" /></div>
				</div>
			</div>

			<table class="table" id="resultados">
				<thead>
					<tr>
						<th class="text-center" width="200px">Fecha</th>
						<th>Evento</th>
					</tr>
				</thead>
				<tbody class="list"></tbody>
			</table>
			<div class="alert alert-warning" id="alertaResultados" style="display:none">No se encontraron eventos con la
				búsqueda realizada.</div>
			<div class="text-center">
				<div class="pagination">&nbsp;</div>
			</div>
		</div>
	</section>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.0/moment-with-locales.min.js"></script>
	<script>
		(function ($) {
			$(document).ready(function () {

				key = "1qdYYzlCHoixe1qp9NjrGLMM0eQzCw6pQSIWWHmN4sGI";
				$.getJSON('https://spreadsheets.google.com/feeds/list/' + key + '/1/public/values?alt=json',
					function (data) {
						window.lista = data.feed.entry;

						//Traer datos iniciales
						$(".section-eventos").removeClass('state-loading');
						$("#eventos").show();
						buscar();

					})



				function buscar() {

					//LIMPIAR
					$("#resultados tbody").html("");
					mes_seleccionado = $("#selectorMes").val();

					//LISTA DE EVENTOS
					$.each(lista, function (index, element) {
						titulo = element["gsx$titulo"]["$t"];
						descripcion = element["gsx$descripcion"]["$t"];
						sitio_url = element["gsx$url"]["$t"];
						fecha_desde = moment(element["gsx$fechadesde"]["$t"], "DD/MM/YYYY").format(
							"DD/MM/YYYY");
						fecha_hasta = moment(element["gsx$fechahasta"]["$t"], "DD/MM/YYYY").format(
							"DD/MM/YYYY");

						if (fecha_hasta == "Invalid date") {
							fecha_evento = fecha_desde;
						} else {
							fecha_evento = "Desde " + fecha_desde + " al " + fecha_hasta;
						}
						mes_evento = moment(element["gsx$fechadesde"]["$t"], "DD/MM/YYYY").format('MM');
						termina_evento = moment(element["gsx$fechahasta"]["$t"], "DD/MM/YYYY").format(
							'MM');
						contacto = element["gsx$contacto"]["$t"];
						horario = element["gsx$horario"]["$t"];
						ubicacion = element["gsx$ubicacion"]["$t"];
						textofecha = element["gsx$textofecha"]["$t"];
						email = element["gsx$email"]["$t"];
						telefono = element["gsx$telefono"]["$t"];
						//hora_desde = element["gsx$horadesde"]["$t"];
						//hora_hasta = element["gsx$horahasta"]["$t"];

						var tieneDescipcion = '';
						var tieneContacto = '';
						var tieneHorario = '';
						var tieneTelefono = '';
						var tieneEmail = '';
						var tieneUbicacion = '';
						var informes = '';
						if (descripcion) {
							tieneDescipcion = "<p class='margin-1'>" + descripcion + "</p>";
						}
						if (contacto || horario || ubicacion) {
						informes =
							"<p class='margin-0'>Informes:</p>";
						}
						if (contacto) {
						tieneContacto =
							"<p class='margin-0'><small><i class='fa fa-user'></i> <strong>Contacto:</strong> " +
							contacto + "</small></p>";
						}
						if (horario) {
							tieneHorario =
								"<p class='margin-0'><small><i class='fa fa-clock-o'></i> <strong>Horario:</strong> " +
								horario + "</small></p>";
						}
						if (telefono) {
							tieneTelefono =
								"<p class='margin-0'><small><i class='fa fa-phone'></i> <strong>Teléfono:</strong> " +
								telefono + "</small></p>";
						}
						if (email) {
							tieneEmail =
								"<p class='margin-0'><small><i class='fa fa-envelope-o'></i> <strong>Email:</strong> <a href='mailto:"+ email +"' target='_blank'>" + email + "</a></small></p>";
						}
						if (ubicacion) {
							tieneUbicacion =
								"<p class='margin-0'><small><i class='fa fa-map-marker'></i> <strong>Lugar:</strong> " +
								ubicacion + "</small></p>";
						}
						if (textofecha){
						fecha_evento = textofecha;
						}
						var link = titulo;
						if (sitio_url){
						link = "<a class='URL' href='" + sitio_url + "'>" + titulo + "</a>"
						}

						var contenido_evento =
						"<tr><td class='text-center'><i class='fa fa-2x text-muted fa-calendar-o m-t-1'></i><div class='m-t-1'><small>" + fecha_evento + "</small></div></td><td class='descripcion'><h6 class='Titulo'>"+ link +"</h6>" + tieneDescipcion + informes + tieneContacto + tieneTelefono + tieneEmail + tieneHorario + tieneUbicacion + "</td></tr>";

						//Se filtra por mes
						/*if(mes_seleccionado == mes_evento || mes_seleccionado == 0){
							$("#resultados tbody").append(contenido_evento);
						}*/
						if (mes_seleccionado == mes_evento || mes_seleccionado == 0) {
							//Se filtra por mes
							$("#resultados tbody").append(contenido_evento);

						} else if (element["gsx$fechahasta"]["$t"]) {

							var inicio = moment(element["gsx$fechadesde"]["$t"], "DD/MM/YYYY");
							var fin = moment(element["gsx$fechahasta"]["$t"], "DD/MM/YYYY");
							var listMeses = [];

							while (fin > inicio || inicio.format('M') === fin.format('M')) {
								listMeses.push(inicio.format('MM'));
								inicio.add(1, 'month');
							}
							for (var i = 0; i < listMeses.length; i++) {
								if (mes_seleccionado == listMeses[i]) {
									$("#resultados tbody").append(contenido_evento);

								}
							}

						}
					})



					//lIST.JS
					var options = {
						valueNames: ['descripcion'],
						page: 10,
						pagination: true
					};
					var serviciosList = new List('eventos', options);

					//FILTRO PALABRA
					var busqueda = $("#text_titulo").val();
					//serviciosList.search(busqueda);	

					serviciosList.filter(getAccentInsensitiveFilter("descripcion", busqueda))

					//AVISO NO HAY RESULTADOS
					if ($("#resultados tbody tr").length == 0) {
						$("#alertaResultados").show();
					} else {
						$("#alertaResultados").hide();
					}


				}


				//BOTÓN BUSQUEDA
				$("#selectorMes").on("change", function () {
					buscar();
				})

				$("#text_titulo").keyup(function (e) {
					buscar();
				});

				// FUNCION REMOVER ACENTO
				var removeAccents = (function () {
					var letters1 = "äáàâăëéèêĕíöóòôŏüúùûŭÄÁÀÂĂËÉÈÊĔÍÖÓÒÔŎÜÚÙÛŬßșȘ",
						letters2 = "aaaaaeeeeeiooooouuuuuAAAAAEEEEEIOOOOOUUUUUssS",
						patternLetters = new RegExp("[" + letters1 + "]", "g"),
						lookupLetters = {},
						letterTranslator;

					letters1.split("").forEach(function (letter, i) {
						lookupLetters[letter] = letters2[i];
					});

					letterTranslator = function (match) {
						return lookupLetters[match] || match;
					};

					return function removeAccents(input) {
						return input.replace(patternLetters, letterTranslator);
					};
				})();

				// FILTRO ACENTOS PARA LIST.JS
				function getAccentInsensitiveFilter(property, search) {
					search = removeAccents(search).toLowerCase();

					return function (item) {
						var value = removeAccents(item.values()[property] || "").toLowerCase();
						return value.indexOf(search) > -1;
					};
				}


			});
		})(jQuery);
	</script>


</div>
    </main>
    
<footer class="main-footer">
    <div class="container">
        <section>
            <div class="row">
                <div class="col-sm-6 col-sm-12">
                    <section class="block block-block clearfix"> <img class="image-responsive"
                            src="http://argob.github.io/poncho/plantillas/paginas-de-argentina/img/argentinagob.svg"
                            alt="Argentina.gob.ar - Presidencia de la Nación">
                        <p class="text-muted small m-b-2"> <a
                                href="https://creativecommons.org/licenses/by/4.0/deed.es" target="_blank">Los
                                contenidos de Argentina.gob.ar están licenciados bajo Creative Commons Atribución 4.0 Internacional</a></p>
                    </section>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="region region-footer2">
                        <section id="block-menu-menu-footer-2" class="block block-menu clearfix">
                            <ul class="menu ">
                                <li class="first leaf"><a href="/servicios">Trámites y servicios</a></li>
                                <li class="leaf"><a href="https://www.argentina.gob.ar/turnos">Turnos</a></li>
                                <li class="leaf"><a href="/organismos">Organismos del Estado</a></li>
                                <li class="leaf"><a href="http://mapadelestado.jefatura.gob.ar/">Mapa del Estado</a>
                                </li>
                                <li class="last leaf"><a href="/normativa">Leyes argentinas</a></li>
                            </ul>
                        </section>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="region region-footer3">
                        <section id="block-menu-menu-footer-3" class="block block-menu clearfix">
                            <ul class="menu">
                                <li class="first leaf"><a href="/acerca">Acerca de este sitio</a></li>
                                <li class="leaf"><a href="/terminos-y-condiciones">Términos y condiciones</a></li>
                                <li class="last leaf"><a href="/ayuda">Ayuda</a></li>
                            </ul>
                        </section>
                    </div>
                </div>
            </div>
        </section>
    </div>
</footer>

    
  </body>
</html>
