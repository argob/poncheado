---
layout: argentina
---

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <ol class="breadcrumb pull-left">
                <li><a href="/">Argentina</a></li>
                <li><a href="/">El Estado en tu Barrio </a></li>
                <li class="active"><span>Nombre del punto de atención</span></li>
            </ol>
        </div>
    </div>
</div>

<section class="p-t-0">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
              <div id="titleLugar" class="hidden">
                <h3 id="titleLocalidad" class="h5 text-primary m-t-3"></h3> 
                <h2 id="titleProvincia" class="m-t-0"></h2>
              </div>
              <hr>  
            </div>
            <div class="col-md-8">
                <h4 class="label label-danger hidden" id="estado">
                    <div class="media-left hidden-xs">
                        <i class="fa fa-exclamation-triangle fa-fw fa-2x m-t-05" aria-hidden="true"></i>
                    </div>
                    <div class="media-body text-left">
                        <h5 id="motivosuspendido"></h5>
                    </div>
                </h4>
                <h3 class="h4 m-y-2">¿Qué trámites puedo realizar en este punto ?</h3>
                <div class="form-group">
                      <label class="control-label h5">Buscar trámite</label>
                      <div class="row">
                        <div class="col-md-12">
                            <input type="text" class="form-control" value="" placeholder="Escribe el nombre del trámite">
                        </div>
                      </div>
                </div>
                <h4 class="h5">Seleccioná un trámite para ver los requisitos:</h4>
                <div class="list" data-render="servicios"></div>

            </div>

            <div class="col-md-4">
                <div>
                    <h4>Información del punto</h4>
                    <div id="mapa"></div>
                </div>
                <div class="media">
                  <div class="media-left media-middle">
                      <span class="fa fa-map-marker text-primary m-b-0" aria-hidden="true"></span>
                  </div>
                  <div class="media-body media-middle">
                    <p class="m-b-0"><b id="direccion"></b></p>
                  </div>
                </div>
                <div class="media">
                  <div class="media-left media-middle">
                      <span class="fa fa-clock-o text-primary m-b-0" aria-hidden="true"></span>
                  </div>
                  <div class="media-body media-middle">
                    <p class="m-b-0"><b id="hora"></b><b>hs</b></p>
                  </div>
                </div>
                <div class="media">
                  <div class="media-left media-middle">
                      <span class="fa fa-calendar text-primary m-b-0" aria-hidden="true"></span>
                  </div>
                  <div class="media-body media-middle">
                    <p class="m-b-0"><b>Disponible del <span id="inicio"></span> al <span id="fin"></span></b></p>
                  </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section>
  <div class="container">
    <hr>
    <div class="row">
      <div class="col-md-12">
        <h3 class="text-center m-b-2">Mirá las fotos de El Estado en tu Barrio</h3>
      </div>
      <div class="col-md-4">
          <img src="https://www.argentina.gob.ar/sites/default/files/eetb_catamarca_1.jpg" class="img-responsive img-rounded m-b-1">
      </div>      
      <div class="col-md-4">
         <img src="https://www.argentina.gob.ar/sites/default/files/eetb_catamarca_2.jpg" class="img-responsive img-rounded m-b-1">
      </div>
      <div class="col-md-4">
         <img src="https://www.argentina.gob.ar/sites/default/files/eetb_catamarca_3.jpg" class="img-responsive img-rounded m-b-1">
      </div>
    </div>    
  </div>
</section>


<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>


<script type="text/javascript">

(function($) {

    var templates = {
      servicios: `<div class="panel panel-default">
                    <div class="panel-heading" style="min-height: auto; border-bottom: 1px solid #ccc;">
                      <h4><b class="text-muted">{categoria}</b></h4>
                    </div>
                  <div class="panel-body" id="servicios-{i}">
                    <ul class="list content_format">`,
    }

    window.config = {
      _provincia: 'Ninguna',
      _localidad: 'Ninguna'
    }

    var categoriasServicios = [];
    var listadoServicios = [];

    var render = {      
      servicios: function( ){

        jQuery('[data-render=servicios]').html('');

        window.serviciosList = [];

        jQuery.each(listadoServicios, function(index, items){

          var html = templates.servicios;

          html = html
          .replace(/{categoria}/gi, categoriasServicios[index])
          .replace(/{i}/gi, index);

          jQuery.each(items, function(index, item){
            html += '<li><span class="servicio">'+ item +'</span></li>';
          });

          jQuery('[data-render=servicios]').append( html + '</ul></div></div>' );

          var listOptions = { 
            valueNames: [ 'servicio' ],
            fuzzySearch: {
              searchClass: "search",
              location: 0,
              distance: 100,
              threshold: 0.4,
              multiSearch: true
            }

          };
          serviciosList[index] = new List('servicios-'+ index, listOptions);

        });
      }      
    }

    jQuery.ajax({
      url: 'https://spreadsheets.google.com/feeds/list/1bdkeYatDDA0o4y-6LvNLmiliKto29hhEOfzY7vI2J_w/1/public/values?alt=json',
      data: 'json',
      success: function(response){
        jQuery.each(response.feed.entry, function(index, row){

          if ( !(config._provincia != 'Ninguna' && config._provincia != row.gsx$provincia.$t ) ) {

            if( categoriasServicios.indexOf( row.gsx$categoria.$t ) == -1 ){
              categoriasServicios.push( row.gsx$categoria.$t )
              listadoServicios[ categoriasServicios.length - 1 ] = [ row.gsx$servicio.$t ];
            }else{
              var categoria = categoriasServicios.indexOf( row.gsx$categoria.$t );
              listadoServicios[ categoria ].push( row.gsx$servicio.$t );
            }
          }
        });
        render.servicios();
      }
    });   

    jQuery('#search').on('click', function(event){
      buscar();
      event.preventDefault();
    });

    jQuery('form[role=search]').on('submit', function(event){
      buscar();
      event.preventDefault();
    });



    var buscar = function(){
      var busqueda = jQuery('.search').val()
      jQuery.each(serviciosList, function(index, item){
        serviciosList[index].fuzzySearch( busqueda );

        if(serviciosList[index].matchingItems.length == 0){
          jQuery('#servicios-'+ index ).prev().addClass('hidden');
        }else{
          jQuery('#servicios-'+ index ).prev().removeClass('hidden');
        }
      });

    }


  window.onload = function() {
    var url_string = window.location.href;
    var url = new URL(url_string);
    var prov = url.searchParams.get("provincia");
    var loc = url.searchParams.get("localidad");
    config._provincia = prov;
    config._localidad = loc;
    var inicio = url.searchParams.get("inicio");
    var fin = url.searchParams.get("fin");
    var estado = url.searchParams.get("estado");
    var hora = url.searchParams.get("hora");
    var direccion = url.searchParams.get("direccion");
    var latitud = url.searchParams.get("latitud");
    var longitud = url.searchParams.get("longitud");
    if (config._provincia !== null || config._localidad !== null ) {
      $('#titleLugar').removeClass('hidden');
      $('#titleLocalidad').text(config._localidad);
      $('#titleProvincia').text(config._provincia);
      $('#inicio').text(inicio);
      $('#fin').text(fin);
      $('#estado').text(estado);
      $('#hora').text(hora);
      $('#direccion').text(direccion);
      $('#latitud').text(latitud);
      $('#longitud').text(longitud);
    }

    var srcMapa = '<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3284.648076853708!2d-58.411391284770694!3d-34.58777028046373!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95bcca825323288d%3A0xa602f726bbfe97b4!2sAv.+Cnel.+D%C3%ADaz+2079%2C+C1425DQG+CABA!5e0!3m2!1ses!2sar!4v1494874630015" width="100%" height="300" frameborder="0" style="border:0" allowfullscreen></iframe>';

    $('#mapa').append( srcMapa );

    render.servicios();

  };


})(jQuery);

</script>
