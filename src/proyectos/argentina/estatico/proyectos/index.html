---
layout: argentina
---

<section class="jumbotron" style="background-image: url('img/precios_cuidados.jpg');">
  <div class="jumbotron_body">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-8 col-md-offset-2 text-center">
          <h2>Tablero Ciudadano</h2>
          <p>Estos son los proyectos prioritarios en los que trabaja el Ministerio de Modernización. Participá en el analisis y seguimiento de nuestras acciones y resultados.</p>
          <p class="text-center">
            <a href="https://www.argentina.gob.ar/tablero-ciudadano/como-lo-hacemos" target="_blank" class="btn btn-success btn-lg">¿Cómo lo hacemos?</a>
          </p>
        </div>
      </div>
    </div>
  </div>
  <div class="overlay"></div>
</section>

<div class="container">
  <section>
    <h2>Lineamientos</h2>
    <!-- <p>Acá te presentamos los lineamentos</p> -->

    <div class="row m-t-3">
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="icon-item">
            <i class="fa fa-search"></i>
            <h3 class="h4">Gobierno Innovador y Abierto</h3>
            <p class="text-muted">Promovemos la participación ciudadana para que sumes tus ideas a la gestión y ponemos los datos de gobierno a tu disposición para impulsar la co-creacion de soluciones.</p>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="icon-item">
            <i class="fa fa-users"></i>
            <h3 class="h4">Empleo público de calidad</h3>
            <p class="text-muted">Empleados públicos capacitados, reconocidos por su trabajo y al servicio del ciudadano.</p>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="icon-item">
            <i class="fa fa-desktop"></i>
             <h3 class="h4">Estado digital y eficiente </h3>
             <p class="text-muted">Trabajamos con los ministerios para que incorporen nuevas tecnologías de gestión, fortalezcan la infraestructura tecnológica y redes, avancen hacia una administración sin papeles facilitando tu interacción con el Estado, y lanzamos nuevas aplicaciones y sitios web para que puedas hacer trámites de manera más rápida y simple​</p>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="icon-item">
            <i class="fa fa-university"></i>
            <h3 class="h4">Municipios innovadores</h3>
            <p class="text-muted">Impulsamos el desarrollo de ciudades inteligentes en todas las provincias y municipios.</p>
          </div>
        </div>
    </div> 
  </section>

  <hr>

  <section>
    <h2 class="text-center m-b-2 h1">Nuestros proyectos</h2>
    <div id="proyectos">
      <div class="row">
        <div class="col-md-6">    
          <div class="form-group">
            <label>Buscá proyectos</label>
            <input class="form-control search" placeholder="Buscá proyectos por nombre o descripción">
          </div>
        </div>
        <div class="col-md-3">
          <div class="form-group">
            <label for="">Filtrar por lineamiento</label>
            <select id="tipo-proyectos" class="form-control">
              <option data-tipoproyectos="todos" value="todos">Todos</option>
              <option data-tipoproyectos="gobierno" value="gobierno">Gobierno Innovador y Abierto</option>
              <option data-tipoproyectos="empleo" value="empleo">Empleo público de calidad</option>
              <option data-tipoproyectos="estado" value="estado">Estado digital y eficiente</option>
              <option data-tipoproyectos="municipio" value="municipio">Municipios innovadores</option>
            </select>
          </div>
        </div>
        <div class="col-md-3">
          <div class="form-group">
            <label for="">Ordenar por</label>
            <select id="ordenar-proyectos" class="form-control">
              <option class="sort" data-sort="fecha" value="nuevos">Más nuevos</option>
              <option value="duracion">Mayor duración</option>
              <option value="cumplimiento">Mayor cumplimiento</option>
            </select>
 <button class="sort hidden" data-sort="fecha">
    mas nuevos
  </button>  
   <button class="sort hidden" data-sort="duracion">
    duracion
  </button>          
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-group">
            <label for="">Filtrar por alcance</label>
            <div id="alcance" class="btn-group btn-group-justified margin-60">
                <a data-filtro="funcionario" class="btn btn-default">Funcionarios Públicos</a>
                <a data-filtro="civil" class="btn btn-default">Sociedad Civil</a>
                <a data-filtro="apn" class="btn btn-default">Administración Pública</a>
                <a data-filtro="gobiernos" class="btn btn-default">Gobiernos Subnacionales</a>
            </div>                
          </div>
        </div>
      </div>
      <div class="list row panels-row m-y-3" data-render="tarjetas">
      </div>
    </div>
  </section> 
</div>

<div data-render="modales"></div> 

<script src="{{ "/node_modules/list.js/dist/list.min.js" | prepend: site.baseurl }}"></script>
<script src="{{ "/node_modules/moment/min/moment.min.js" | prepend: site.baseurl }}"></script>
<script src="{{ "/node_modules/moment/locale/es.js" | prepend: site.baseurl }}"></script>

<script>

  $(function(){

    var templates = {
      tarjeta: '<div class="col-xs-12 col-sm-6 col-md-4"><span class="fecha hidden">{inicioProyecto}</span><span class="duracion hidden">({duracionProyecto})</span> <a href="#proyecto-{index}" data-toggle="modal" class="panel panel-default"> <div class="panel-body"><h3 class="nombre-proyecto">{nombre}</h3> <p class="text-muted descripcion-proyecto">{descripcion}</p><div class="media m-t-1"> <div class="media-left media-middle"> <span class="fa fa-check fa-2x fa-fw text-muted" aria-hidden="true"></span> </div><div class="media-body media-middle"> <div class="text-muted">{metas}</div></div></div><div class="media"> <div class="media-left media-middle"> <span class="fa fa-line-chart fa-2x fa-fw text-muted" aria-hidden="true"></span> </div><div class="media-body media-middle"> <span class="text-muted" data-render="cumplimiento"></span><span class="text-muted"> cumplido</span></div></div></div></a></div>',
      modal: '<div id="proyecto-{index}" class="modal fade" tabindex="-1" role="dialog"> <div class="modal-dialog modal-lg"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button> <h4 class="modal-title">{proyecto}</h4> </div> <div class="modal-body p-x-2"> <p> <span>{innovacion}</span> <span>{participacion}</span> <span>{apertura}</span> <span>{eficiencia}</span> </p> <h5 class="m-t-2">Objetivo</h5> <p>{objetivo}</p> <h5 class="m-t-3">Impacto</h5> <p>{impacto}</p> <div class="row numbers p-b-1 text-center"> <div class="col-sm-6 col-md-4"> <div class="h4">{inicioProyecto} </div> <p class="text-muted">Comienzo</p> </div> <div class="col-sm-6 col-md-4"> <div class="h4">{finProyecto}</div> <p class="text-muted">Finalización provista</p> </div> <div class="col-sm-6 col-md-4"> <div class="h4" data-render="cumplimiento"> </div> <p class="text-muted">Cumplimiento</p> </div> </div> <h5 class="m-t-2">Indicadores​</h5> <table class="table"> <thead> <tr> <th>Indicador</th> <th>Avance</th> <th>Meta Anual</th> </tr> </thead> <tbody data-render="indicadores"> </tbody> </table> <h5 class="m-t-3">¿Cómo lo vamos a lograr?​</h5> <table class="table"> <thead> <tr> <th>Etapas del proyecto</th> <th>Inicio</th> <th>Fin</th> <th style="width:130px;">Estado</th> </tr> </thead> <tbody data-render="hitos"> </tbody> </table> <h5 class="m-t-2">Alcance</h5> <p><span>{funcionario}</span><span>{civil}</span><span>{apn}</span><span>{gobiernos}</span></p> <h5 class="m-t-3">Organismo responsable</h5> <p>{area}</p> <p class="text-center m-t-3 m-b-1"> <a href="{link}" target="_blank" class="btn btn-primary btn-lg">Conocer más del proyecto</a> </p> </div> </div> </div> </div>',
      hito: '<tr> <td class="titulo"> <p>{nombre}</p></td> <td><p>{inicio}</p></td> <td><p>{fin}</p></td> <td><p><strong>{estado}</strong></p></td> </tr>',
      indicador: '<tr> <td><p>{nombre}</p></td><td><p>{avance}</p></td><td><p>{estado2016}</p></td></tr>'
    }

    window.proyectos = [];

    $.ajax({
      url: 'https://spreadsheets.google.com/feeds/list/1kbUbjLgw4Mx-hkKxt_64ncNj6vDynXdpr_i1MonnDFs/1/public/values?alt=json',
      data: 'json',
      success: function(response){
        console.log(response.feed.entry);

        $.each(response.feed.entry, function(index, row){

          if( row.gsx$tipo.$t == "proyecto"  ){
              //console.log(row.gsx$lineamiento.$t)

            proyectos.push({
              index: index,
              lineamiento: row.gsx$lineamiento.$t,
              nombre: row.gsx$nombre.$t,
              objetivo: row.gsx$objetivo.$t,
              impacto: row.gsx$impacto.$t,
              funcionario: row.gsx$funcionario.$t,
              civil: row.gsx$civil.$t,
              apn: row.gsx$apn.$t,
              gobiernos: row.gsx$gobiernos.$t,
              innovacion: row.gsx$innovacion.$t,
              participacion: row.gsx$participacion.$t,
              eficiencia: row.gsx$eficiencia.$t,
              apertura: row.gsx$apertura.$t,
              area: row.gsx$area.$t,
              link: row.gsx$link.$t,
              indicadores: [],
              hitos: []
            });

          } else if( row.gsx$tipo.$t == "indicador" ){
            //console.log(row.gsx$avance.$t)

            proyectos[ proyectos.length - 1 ].indicadores.push({
              nombre: row.gsx$nombre.$t,
              fuente: row.gsx$fuente.$t,
              formulacion: row.gsx$formulacion.$t,
              estado2016: row.gsx$estado2016.$t,
              estado2017: row.gsx$estado2017.$t,
              avance: row.gsx$avance.$t
            });

          } else if( row.gsx$tipo.$t == "hito" ){
            //console.log(row.gsx$estado.$t)

            proyectos[ proyectos.length - 1 ].hitos.push({
              nombre: row.gsx$nombre.$t,
              inicio: row.gsx$inicio.$t,
              fin: row.gsx$fin.$t,
              estado: row.gsx$estado.$t
            });

          }

        })

        render.tarjetas('todos');

        var listOptions = {valueNames: [ 'nombre-proyecto', 'descripcion-proyecto', 'fecha', 'duracion' ] };
        var proyectosList = new List('proyectos', listOptions);


        $("#ordenar-proyectos").on("change", function() {
        });

      }
    });


    var render = {
      tarjetas: function(tipoproyectos, alcance ){

        $('[data-render=tarjetas]').html('');
        $('[data-render=modales]').html('');


        $.each(proyectos, function(index, proyecto){

          //console.log("index",index);
          //console.log(" tipoproyectos:",tipoproyectos, "alcance:",alcance);
          //console.log(" lineamiento",proyecto.lineamiento,"alcance",proyecto[alcance]);
          //console.log("funcionario",proyecto.funcionario);
          //console.log("civil",proyecto.civil);
          //console.log("gobiernos",proyecto.gobiernos);
          //console.log("apn",proyecto.apn);

          if ( !(tipoproyectos != 'todos' && tipoproyectos != proyecto.lineamiento) 
            && !(alcance && proyecto[alcance] != "si") ) {

          var html = templates.tarjeta;
          var modal = templates.modal;

          fecha = proyecto.hitos[0].inicio.split('/');

        var inicioFecha = moment(proyecto.hitos[0].inicio, "DD-MM-YYYY");
        var finFecha = moment(proyecto.hitos[proyecto.hitos.length - 1].fin, "DD-MM-YYYY");
        var duracion = finFecha.diff(inicioFecha, 'days'); 
        console.log(duracion);

          html = html.replace(/{nombre}/gi, proyecto.nombre)
          .replace(/{index}/gi, index)
          .replace(/{lineamiento}/gi, proyecto.lineamiento)
          .replace(/{descripcion}/gi, proyecto.objetivo.substring(0, 100) + '...')
          .replace(/{funcionario}/gi, proyecto.funcionario.replace("no","").replace("si","Funcionarios Públicos, "))
          .replace(/{civil}/gi, proyecto.civil.replace("no","").replace("si","Sociedad Civil, "))
          .replace(/{apn}/gi, proyecto.apn.replace("no","").replace("si","Administración Pública, "))
          .replace(/{gobiernos}/gi, proyecto.gobiernos.replace("no","").replace("si","Gobiernos Subnacionales, "))
          .replace(/{metas}/gi, proyecto.indicadores[0].estado2016)
          .replace(/{inicioProyecto}/gi, fecha[2] + fecha[1] + fecha[0])
          .replace(/{duracionProyecto}/gi, duracion);
          //.replace(/{estado}/gi, 'Iniciado');

          modal = modal.replace(/{proyecto}/gi, proyecto.nombre)
          .replace(/{index}/gi, index)
          .replace(/{innovacion}/gi, proyecto.innovacion.replace("no","").replace("si","innovacion | "))
          .replace(/{participacion}/gi, proyecto.participacion.replace("no","").replace("si","participacion | "))
          .replace(/{apertura}/gi, proyecto.apertura.replace("no","").replace("si","apertura | "))
          .replace(/{eficiencia}/gi, proyecto.eficiencia.replace("no","").replace("si","eficiencia | "))
          .replace(/{objetivo}/gi, proyecto.objetivo)
          .replace(/{estado}/gi, proyecto.estado)
          .replace(/{funcionario}/gi, proyecto.funcionario.replace("no","").replace("si","Funcionarios Públicos, "))
          .replace(/{civil}/gi, proyecto.civil.replace("no","").replace("si","Sociedad Civil, "))
          .replace(/{apn}/gi, proyecto.apn.replace("no","").replace("si","Administración Pública, "))
          .replace(/{gobiernos}/gi, proyecto.gobiernos.replace("no","").replace("si","Gobiernos Subnacionales, "))
          .replace(/{link}/gi, proyecto.link)
          .replace(/{area}/gi, proyecto.area)
          .replace(/{impacto}/gi, proyecto.impacto)
          .replace(/{avance}/gi, proyecto.avance)
          .replace(/{descripcion}/gi, proyecto.objetivo.substring(0, 100) + '...')
          .replace(/{inicioProyecto}/gi, proyecto.hitos[0].inicio)
          .replace(/{finProyecto}/gi, proyecto.hitos[proyecto.hitos.length - 1].fin);

          $('[data-render=tarjetas]').append( html );
          $('[data-render=modales]').append( modal );   

          $.each(proyecto.indicadores, function(index, indicador){

            var htmlIndicador = templates.indicador;

            htmlIndicador = htmlIndicador.replace(/{nombre}/gi, indicador.nombre)
            .replace(/{fuente}/gi, indicador.fuente)
            .replace(/{formulacion}/gi, indicador.formulacion)
            .replace(/{estado2016}/gi, indicador.estado2016)
            .replace(/{estado2017}/gi, indicador.estado2017)
            .replace(/{avance}/gi, indicador.avance);

            //$('[data-render=modales] > div:last').find('[data-render=indicadores]').append(indicador.avance + '<br>');
            $('[data-render=modales] > div:last').find('[data-render=indicadores]').append( htmlIndicador );

          });

          var cantCumplidos = 0;
          $.each(proyecto.hitos, function(index, hito){

            var htmlHito = templates.hito;

            if (hito.estado == "finalizado"){
              var estado = '<span class="text-success"><i class="fa fa-check-square-o fa-fw" aria-hidden="true"></i> Finalizado</span>';
            } 
            else if (hito.estado == "en_avance") {
              var estado = '<span class="text-gray"><i class="fa fa-arrow-right fa-fw" aria-hidden="true"></i> En avance</span>';
            } 
            else if (hito.estado == "sin_inicio") {
              var estado = '<span class="text-muted"><i class="fa fa-calendar-minus-o fa-fw" aria-hidden="true"></i> Sin inicio</span>';
            }
            else if (hito.estado == "demorado") {
              var estado = '<span class="text-danger"><i class="fa fa-ban fa-fw" aria-hidden="true"></i> Demorado</span>';
            }

            


            if (hito.estado == "finalizado"){
              cantCumplidos++;
            }

            htmlHito = htmlHito.replace(/{nombre}/gi, hito.nombre)
            .replace(/{inicio}/gi, hito.inicio)
            .replace(/{fin}/gi, hito.fin)
            .replace(/{estado}/gi, estado);

            //$('[data-render=modales] > div:last').find('[data-render=hitos]').append(hito.avance + '<br>');
            $('[data-render=modales] > div:last').find('[data-render=hitos]').append( htmlHito );

          });         

            if(cantCumplidos > 0) {
                var porcentajeCumplidos = Math.round((cantCumplidos / proyecto.hitos.length)*100)+"%";
                $('[data-render=modales] > div:last , [data-render=tarjetas] > div:last').find('[data-render=cumplimiento]').text( porcentajeCumplidos );
            } 
            else {
                var porcentajeCumplidos = "0%";
                $('[data-render=modales] > div:last , [data-render=tarjetas] > div:last' ).find('[data-render=cumplimiento]').text( porcentajeCumplidos );
              }

          }

        });

      }   
    }

    $("#tipo-proyectos").on("change", function() {
      $("#alcance [data-filtro]").removeClass('active');
      var tipoproyectos = $( "#tipo-proyectos option:selected" ).data('tipoproyectos');
      render.tarjetas(tipoproyectos);
    });

    $("#alcance [data-filtro]").bind("click", function() {
      $("#tipo-proyectos").val("todos");
      $(this).addClass('active').siblings().removeClass('active');
      var alcance = $(this).attr('data-filtro');
      render.tarjetas("todos",alcance);
    });


  });

     
</script>

