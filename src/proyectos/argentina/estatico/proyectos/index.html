---
layout: argentina
---

<section class="jumbotron" style="background-image: url('img/precios_cuidados.jpg');">
  <div class="jumbotron_body">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-8 col-md-offset-2 text-center">
          <h2>Tablero Ciudadano</h2>
          <p class="margin-0">Estos son los proyectos prioritarios en los que trabaja el Ministerio de Modernización. Participá en el analisis y seguimiento de nuestras acciones y resultados.</p>
        </div>
      </div>
    </div>
  </div>
  <div class="overlay"></div>
</section>

<div class="container">
  <section>
    <h2>Lineamientos</h2>
    <!-- <p>Acá te presentamos los lineamentos</p> -->

    <div class="row m-t-3">
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="icon-item">
            <i class="fa fa-search"></i>
            <h3 class="h4">Gobierno Innovador y Abierto</h3>
            <p class="text-muted">Promovemos la participación ciudadana para que sumes tus ideas a la gestión y ponemos los datos de gobierno a tu disposición para impulsar la co-creacion de soluciones.</p>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="icon-item">
            <i class="fa fa-users"></i>
            <h3 class="h4">Empleo público de calidad</h3>
            <p class="text-muted">Empleados públicos capacitados, reconocidos por su trabajo y al servicio del ciudadano.</p>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="icon-item">
            <i class="fa fa-desktop"></i>
             <h3 class="h4">Estado digital y eficiente </h3>
             <p class="text-muted">Trabajamos con los ministerios para que incorporen nuevas tecnologías de gestión y lanzamos nuevas Apps y sitios web para que puedas hacer trámites de manera más rápida y simple.</p>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="icon-item">
            <i class="fa fa-university"></i>
            <h3 class="h4">Municipios innovadores</h3>
            <p class="text-muted">Impulsamos el desarrollo de ciudades inteligentes en todas las provincias y municipios.</p>
          </div>
        </div>
    </div> 
  </section>

  <hr>

  <section>
    <h2 class="text-center">Nuestros proyectos</h2>
    <div id="proyectos">
      <div class="row">
        <div class="col-md-8 col-md-offset-2">    

          <div class="form-group">
            <input class="form-control input-lg search" placeholder="Buscá proyectos">
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label for="">Tipo de proyectos</label>
                <select id="tipo-proyectos" class="form-control">
                  <option data-tipoproyectos="todos" value="todo">Todos</option>
                  <option data-tipoproyectos="gobierno" value="calidad">Gobierno Innovador y Abierto</option>
                  <option data-tipoproyectos="empleo" value="abierto">Empleo público de calidad</option>
                  <option data-tipoproyectos="estado" value="eficiente">Estado digital y eficiente</option>
                  <option data-tipoproyectos="municipio" value="innovadores">Municipios innovadores</option>
                </select>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label for="">Filtrar por alcance</label>
                <select class="form-control">
                  <option value="funcionarios">Funcionarios Públicos</option>
                  <option value="civil">Sociedad Civil</option>
                  <option value="publica">Administración Pública</option>
                  <option value="subnacionales">Gobiernos Subnacionales</option>
                </select>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label for="">Ordenar por</label>
                <select class="form-control">
                  <option value="nuevos">Más nuevos</option>
                  <option value="duracion">Mayor duración</option>
                  <option value="cumplimiento">Mayor cumplimiento</option>
                </select>
              </div>
            </div>
          </div>

        </div>
      </div>

      <div class="row panels-row m-y-3" data-render="tarjetas">
      </div>

    </div>
  </section> 
</div>

<div data-render="modales"></div> 

<script src="{{ "/node_modules/list.js/dist/list.min.js" | prepend: site.baseurl }}"></script>

<script>

  $(function(){

    var templates = {
      tarjeta: '<div class="col-xs-12 col-sm-6 col-md-4"> <a href="#proyecto-{index}" data-toggle="modal" class="panel panel-default"> <div class="panel-body"><div class="">{lineamiento}</div> <h3 class="nombre-proyecto">{nombre}</h3> <p class="text-muted descripcion-proyecto">{descripcion}</p><div class="media m-t-1"> <div class="media-left media-middle"> <span class="fa fa-check fa-2x fa-fw text-muted" aria-hidden="true"></span> </div><div class="media-body media-middle"> <div class="text-muted">{metas}</div></div></div><div class="media"> <div class="media-left media-middle"> <span class="fa fa-line-chart fa-2x fa-fw text-muted" aria-hidden="true"></span> </div><div class="media-body media-middle"> <div class="text-muted">{cumplimiento}</div></div></div><div class="media"> <div class="media-left media-middle"> <span class="fa fa-cogs fa-2x fa-fw text-muted" aria-hidden="true"></span> </div><div class="media-body media-middle"> <div class="text-muted">{estado}</div></div></div></div></a></div>',
      modal: '<div id="proyecto-{index}" class="modal fade" tabindex="-1" role="dialog"> <div class="modal-dialog modal-lg"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button> <h4 class="modal-title">{proyecto}</h4> </div> <div class="modal-body p-x-2"> <p> <span>{innovacion}</span> <span>{participacion}</span> <span>{apertura}</span> <span>{eficiencia}</span> </p> <h5 class="m-t-2">Objetivo</h5> <p>{objetivo}</p> <h5 class="m-t-3">Impacto</h5> <p>{impacto}</p> <div class="row numbers p-b-1 text-center"> <div class="col-sm-6 col-md-4"> <div class="h4">{inicioProyecto} </div> <p class="text-muted">Comienzo</p> </div> <div class="col-sm-6 col-md-4"> <div class="h4">{finProyecto}</div> <p class="text-muted">Finalización provista</p> </div> <div class="col-sm-6 col-md-4"> <div class="h4" data-render="cumplimiento"> </div> <p class="text-muted">Cumplimiento</p> </div> </div> <h5 class="m-t-2">Indicadores​</h5> <table class="table"> <thead> <tr> <th>Indicador</th> <th>Avance</th> <th>Meta Anual</th> </tr> </thead> <tbody data-render="indicadores"> </tbody> </table> <h5 class="m-t-3">¿Cómo lo vamos a lograr?​</h5> <table class="table"> <thead> <tr> <th>Etapas del proyecto</th> <th>Inicio</th> <th>Fin</th> <th>Estado</th> </tr> </thead> <tbody data-render="hitos"> </tbody> </table> <h5 class="m-t-2">Alcance</h5> <p><span>{funcionario}</span><span>{civil}</span><span>{apn}</span><span>{gobiernos}</span></p> <h5 class="m-t-3">Organismo responsable</h5> <p>{area}</p> <p class="text-center m-t-3 m-b-1"> <a href="{link}" target="_blank" class="btn btn-primary btn-lg">Conocer más del proyecto</a> </p> </div> </div> </div> </div>',
      hito: '<tr> <td class="titulo"> <p>{nombre}</p></td> <td><p>{inicio}</p></td> <td><p>{fin}</p></td> <td><p>{estado}</p></td> </tr>',
      indicador: '<tr> <td><p>{nombre}</p></td><td><p>{avance}</p></td><td><p>{estado2016}</p></td></tr>'
    }

    window.proyectos = [];

    $.ajax({
      url: 'https://spreadsheets.google.com/feeds/list/1kbUbjLgw4Mx-hkKxt_64ncNj6vDynXdpr_i1MonnDFs/1/public/values?alt=json',
      data: 'json',
      success: function(response){
        //console.log(response.feed.entry);

        $.each(response.feed.entry, function(index, row){

          if( row.gsx$tipo.$t == "proyecto"  ){
              //console.log(row.gsx$lineamiento.$t)

            proyectos.push({
              index: index,
              lineamiento: row.gsx$lineamiento.$t,
              nombre: row.gsx$nombre.$t,
              objetivo: row.gsx$objetivo.$t,
              impacto: row.gsx$impacto.$t,
              funcionario: row.gsx$funcionario.$t,
              civil: row.gsx$civil.$t,
              apn: row.gsx$apn.$t,
              gobiernos: row.gsx$gobiernos.$t,
              innovacion: row.gsx$innovacion.$t,
              participacion: row.gsx$participacion.$t,
              eficiencia: row.gsx$eficiencia.$t,
              apertura: row.gsx$apertura.$t,
              area: row.gsx$area.$t,
              link: row.gsx$link.$t,
              indicadores: [],
              hitos: []
            });

          } else if( row.gsx$tipo.$t == "indicador" ){
            //console.log(row.gsx$avance.$t)

            proyectos[ proyectos.length - 1 ].indicadores.push({
              nombre: row.gsx$nombre.$t,
              fuente: row.gsx$fuente.$t,
              formulacion: row.gsx$formulacion.$t,
              estado2016: row.gsx$estado2016.$t,
              estado2017: row.gsx$estado2017.$t,
              avance: row.gsx$avance.$t
            });

          } else if( row.gsx$tipo.$t == "hito" ){
            //console.log(row.gsx$estado.$t)

            proyectos[ proyectos.length - 1 ].hitos.push({
              nombre: row.gsx$nombre.$t,
              inicio: row.gsx$inicio.$t,
              fin: row.gsx$fin.$t,
              estado: row.gsx$estado.$t
            });

          }

        })

        render.tarjetas('todos');

      }
    });


    var render = {
      tarjetas: function(tipoproyectos){

        $('[data-render=tarjetas]').html('');
        $('[data-render=modales]').html('');

        $.each(proyectos, function(index, proyecto){

          //console.log(" tipoproyectos:"+tipoproyectos);
          //console.log(" lineamiento"+proyecto.lineamiento);
        if(tipoproyectos == 'todos' || tipoproyectos == proyecto.lineamiento){          

          var html = templates.tarjeta;
          var modal = templates.modal;

          console.log(index)
          console.log(proyecto.hitos[0].inicio);
          console.log(proyecto.hitos[proyecto.hitos.length - 1].fin);

          html = html.replace(/{nombre}/gi, proyecto.nombre)
          .replace(/{index}/gi, index)
          .replace(/{lineamiento}/gi, proyecto.lineamiento)
          .replace(/{descripcion}/gi, proyecto.objetivo.substring(0, 100) + '...')
          .replace(/{metas}/gi, '16 encuentros de trabajo')
          .replace(/{cumplimiento}/gi, '20% cumplido')
          .replace(/{estado}/gi, 'Iniciado');

          modal = modal.replace(/{proyecto}/gi, proyecto.nombre)
          .replace(/{index}/gi, index)
          .replace(/{innovacion}/gi, proyecto.innovacion.replace("no","").replace("si","innovacion | "))
          .replace(/{participacion}/gi, proyecto.participacion.replace("no","").replace("si","participacion | "))
          .replace(/{apertura}/gi, proyecto.apertura.replace("no","").replace("si","apertura | "))
          .replace(/{eficiencia}/gi, proyecto.eficiencia.replace("no","").replace("si","eficiencia | "))
          .replace(/{objetivo}/gi, proyecto.objetivo)
          .replace(/{estado}/gi, proyecto.estado)
          .replace(/{funcionario}/gi, proyecto.funcionario.replace("no","").replace("si","Funcionarios Públicos, "))
          .replace(/{civil}/gi, proyecto.civil.replace("no","").replace("si","Sociedad Civil, "))
          .replace(/{apn}/gi, proyecto.apn.replace("no","").replace("si","Administración Pública, "))
          .replace(/{gobiernos}/gi, proyecto.gobiernos.replace("no","").replace("si","Gobiernos Subnacionales, "))
          .replace(/{link}/gi, proyecto.link)
          .replace(/{area}/gi, proyecto.area)
          .replace(/{impacto}/gi, proyecto.impacto)
          .replace(/{avance}/gi, proyecto.avance)
          .replace(/{descripcion}/gi, proyecto.objetivo.substring(0, 100) + '...')
          .replace(/{inicioProyecto}/gi, proyecto.hitos[0].inicio)
          .replace(/{finProyecto}/gi, proyecto.hitos[proyecto.hitos.length - 1].fin);

          // console.log(html);

          $('[data-render=tarjetas]').append( html );
          $('[data-render=modales]').append( modal );   

          $.each(proyecto.indicadores, function(index, indicador){

            var htmlIndicador = templates.indicador;

            htmlIndicador = htmlIndicador.replace(/{nombre}/gi, indicador.nombre)
            .replace(/{fuente}/gi, indicador.fuente)
            .replace(/{formulacion}/gi, indicador.formulacion)
            .replace(/{estado2016}/gi, indicador.estado2016)
            .replace(/{estado2017}/gi, indicador.estado2017)
            .replace(/{avance}/gi, indicador.avance);

            //$('[data-render=modales] > div:last').find('[data-render=indicadores]').append(indicador.avance + '<br>');
            $('[data-render=modales] > div:last').find('[data-render=indicadores]').append( htmlIndicador );

          });

          var cantCumplidos = 0;
          $.each(proyecto.hitos, function(index, hito){

            var htmlHito = templates.hito;

            if (hito.estado == "finalizado"){
              cantCumplidos++;
            }
            htmlHito = htmlHito.replace(/{nombre}/gi, hito.nombre)
            .replace(/{inicio}/gi, hito.inicio)
            .replace(/{fin}/gi, hito.fin)
            .replace(/{estado}/gi, hito.estado);

            //$('[data-render=modales] > div:last').find('[data-render=hitos]').append(hito.avance + '<br>');
            $('[data-render=modales] > div:last').find('[data-render=hitos]').append( htmlHito );

          });         

            if(cantCumplidos > 0) {
                var porcentajeCumplidos = Math.round((cantCumplidos / proyecto.hitos.length)*100)+"%";
                $('[data-render=modales] > div:last').find('[data-render=cumplimiento]').text( porcentajeCumplidos );
            } 
            else {
                var porcentajeCumplidos = "0%";
                $('[data-render=modales] > div:last').find('[data-render=cumplimiento]').text( porcentajeCumplidos );
              }


        }

        });

      }   
    }

    $("#tipo-proyectos").on("change", function() {
      var tipoproyectos = $( "#tipo-proyectos option:selected" ).data('tipoproyectos');
      render.tarjetas(tipoproyectos);
    });  
  
    var listOptions = {valueNames: [ 'nombre-proyecto', 'descripcion-proyecto' ] };
    var proyectosList = new List('proyectos', listOptions);

  });

  // window.showHitos = function(){
  //     var showData = $('#show-data');

  //     var html = '';
  //     $.each( hitos, function( key, item ) {
  //         html += '<tr>';
  //         html += ' <td class="titulo"> <p><strong>{nombre}</strong></p></td>';
  //         html += ' <td class="inicio"><p>{inicio}</p></td>';
  //         html += ' <td class="finalizacion"><p>{fin}</p></td>';
  //         html += ' <td class="estado"><p>{estado}</p></td>';
  //         html += '</tr>';
  
  //     });

  //     showData.empty();
  //     showData.append(html);

  //     var listOptions = {valueNames: [ 'etapa', 'inicio', 'finalizacion', 'estado' ] };
  //     var hitosList = new List('hitos', listOptions);
  // }

     
</script>

