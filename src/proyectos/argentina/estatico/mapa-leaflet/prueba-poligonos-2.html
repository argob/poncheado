
<script src="/node_modules/jquery/dist/jquery.min.js"></script>

<link rel="stylesheet" href="https://gis.argentina.gob.ar/js/leaflet/leaflet.css" />
<script src="https://gis.argentina.gob.ar/js/leaflet/leaflet.js"></script>
</head>
<body>
<div id="map" style="width: 100%; height: 100%;"></div>
<script>
	var map = L.map('map').setView([-40.44, -63.59], 4); // centrado en Argentina -->
            
            L.tileLayer('https://gis.argentina.gob.ar/osm/{z}/{x}/{y}.png', {
                attribution: '&copy; Contribuidores <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);


$.getJSON("barrios-populares_0.json",function(data){
// add GeoJSON layer to the map once the file is loaded
var rows = data.features;
var geojson = '{"type": "FeatureCollection", "features": [';

rows.forEach(function(row, key){
// console.log(row);
geojson += '{"type": "Feature", "id": '+key+', "properties": {"id": "'+ row.properties.id_renabap +'", "nombre": "'+ row.properties.nombre_bar.replace(/"/gi, '') +'", "localidad": "'+ row.properties.localidad +'", "partido": "'+ row.properties.departamen +'", "provincia": "'+ row.properties.provincia +'"}, "geometry": '+ JSON.stringify(row.geometry) + '},';
});


geojson = geojson.slice(0, -1);
geojson += ']}';

console.log(geojson)


        var datalayer = L.geoJson(data ,{
        onEachFeature: function(feature, featureLayer) {
                featureLayer.bindPopup(feature.properties.NAME_1);
}
}).addTo(map);
map.fitBounds(datalayer.getBounds());
});




</script>



